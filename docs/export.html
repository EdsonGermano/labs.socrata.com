---
layout: default
title: Export API
description: Provides functionality to export individual datasets, including the option of providing a SoQL query to filter the data returned.
version: initial
stub: export
type: api
icon: fa fa-fw fa-file-text-o
feedback_url: http://stackoverflow.com/questions/ask?tags=soda,socrata,labs,version-initial,search
last_updated: 2015-04-29
bodyclass: api
custom_css:
- /css/aglio.css
---

<div class="alert alert-info">
  <p><em>Heads up!</em> This is beta version of the {{page.title}} API. Functionality may change, so please come back and check this documentation if your code suddenly stops working properly. Feel free to <a href="http://stackoverflow.com/questions/ask?tags=soda,socrata,labs,version-{{page.version}},{{page.stub}}" class="feedback" target="_blank">provide feedback</a> on this API.</p>
</div>
<div class="container-fluid content"><div class="row with-sidebar"><div class="col-md-3 hidden-phone"><nav id="nav" class="hidden-sm hidden-xs nav"><div class="list-group"><a data-toggle="" data-target="#-menu" href="#" class="list-group-item heading collapsed">Resource Group</a><div id="-menu"><a href="#-export-service" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-info"><i class="fa fa-arrow-down"></i></span>Export Service</a><a href="#-health" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-info"><i class="fa fa-arrow-down"></i></span>Health</a><a href="#-integration-with-external-services-like-plotly" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-info"><i class="fa fa-arrow-down"></i></span>Integration with external services like plotly</a><a href="#-index" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-info"><i class="fa fa-arrow-down"></i></span>Index</a><a href="#-q2-only---integration-with-external-services-like-plotly" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-info"><i class="fa fa-arrow-down"></i></span>Q2 ONLY - Integration with external services like plotly</a><a href="#-q2-only---admin-configuration" style="border-top-left-radius: 0; border-top-right-radius: 0" class="list-group-item"><span class="badge alert-success"><i class="fa fa-plus"></i></span>Q2 ONLY - Admin Configuration</a></div></div></nav></div><div class="col-md-9"><div><header><div class="page-header"><h1 id="top">API Documentation</h1></div></header><div class="description"><h1 id="export-service-api">Export Service API</h1>
<p>The export service is a layered data transformation service atop the SODA2 API. See the latest documentation at <a href="http://docs.exportservice.apiary.io/">http://docs.exportservice.apiary.io/</a></p>
</div></div><div><div class="panel panel-default"><div class="panel-heading"><h3 id="">Resource Group&nbsp;<a href="#"><i class="fa fa-link"></i></a></h3></div><div class="panel-body"><h4 id="-export-service">Export Service&nbsp;<a href="#-export-service"><i class="fa fa-link"></i></a></h4><p>Export Endpoint.</p>
<section id="-export-service-get" class="panel panel-info"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Retrieve Export</span></div><div style="float:left"><a href="#-export-service-get" class="btn btn-xs btn-info">GET</a></div><div style="overflow:hidden"><code>/export/v1/{4x4}.{format}?domain={domain}&amp;query={query}&amp;filename={filename}&amp;$$app_token={app_token}</code></div></div><ul class="list-group"><li class="list-group-item"><strong>Request</strong><a data-toggle="collapse" data-target="#db1712ed546f3a13929fd4d33c0fd41f" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="db1712ed546f3a13929fd4d33c0fd41f" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">app_token</span><br/></code></pre></li><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#a6fa51343fae1970f6c281fa9f9b000b" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="a6fa51343fae1970f6c281fa9f9b000b" class="list-group-item panel-collapse collapse"><div class="description"><p>The request was not-previously cached or the cached copy has expired. The response is immediately streamed back to the client while being simultaniously cached in S3.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/{format}</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">attachment; filename="{filename}"</span><br/></code></pre><h5>Body</h5><pre><code>Name, <span class="hljs-string">"Position Title"</span>, Department, Employee, <span class="hljs-string">"Annual Salary"</span>
<span class="hljs-string">"AARON,  E"</span>, <span class="hljs-string">"WATER RATE TAKER"</span>, <span class="hljs-string">"WATER MGMNT"</span>, <span class="hljs-variable">$87</span>,<span class="hljs-number">228.00</span> 
<span class="hljs-string">"AARON,  J"</span>, <span class="hljs-string">"POLICE OFFICER"</span>, POLICE, <span class="hljs-variable">$75</span>,<span class="hljs-number">372.00</span> 
<span class="hljs-string">"AARON,  K"</span>, <span class="hljs-string">"POLICE OFFICER"</span>, POLICE, <span class="hljs-variable">$75</span>,<span class="hljs-number">372.00</span> 
</code></pre></li><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>302</code></strong><a data-toggle="collapse" data-target="#fa61999086e8234cae3ae30b3b3be79a" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="fa61999086e8234cae3ae30b3b3be79a" class="list-group-item panel-collapse collapse"><div class="description"><p>The request was previously cached, and the cached copy has not expired.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">https://export-service.s3-us-west-2.amazonaws.com/{4x4}.csv</span><br/></code></pre></li></ul></section><h4 id="-health">Health&nbsp;<a href="#-health"><i class="fa fa-link"></i></a></h4><p>Health Endpoint.</p>
<section id="-health-get" class="panel panel-info"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Retrieve Health</span></div><div style="float:left"><a href="#-health-get" class="btn btn-xs btn-info">GET</a></div><div style="overflow:hidden"><code>/export/v1/health/stats</code></div></div><div class="panel-body"><p>Returns 200 if service is considered healthy</p>
</div><ul class="list-group"></ul></section><h4 id="-integration-with-external-services-like-plotly">Integration with external services like plotly&nbsp;<a href="#-integration-with-external-services-like-plotly"><i class="fa fa-link"></i></a></h4><p>Third party integration (Plotly, cartodb etc.) endpoint</p>
<section id="-integration-with-external-services-like-plotly-get" class="panel panel-info"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Retrive integration URL</span></div><div style="float:left"><a href="#-integration-with-external-services-like-plotly-get" class="btn btn-xs btn-info">GET</a></div><div style="overflow:hidden"><code>/export/v1/integrations/{4x4}</code></div></div><div class="panel-body"><p>Returns 200 with a url</p>
</div><ul class="list-group"><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#5a72df37b0d30a1c4076aaf8bcfa168a" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="5a72df37b0d30a1c4076aaf8bcfa168a" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/json</span><br/></code></pre><h5>Body</h5><pre><code>[
    { <span class="hljs-property">name</span>: plotly, url: URL <span class="hljs-keyword">to</span> plotly},
    { <span class="hljs-property">name</span>: cartodb, url: URL <span class="hljs-keyword">to</span> cartodb},
    ....
]
</code></pre></li></ul></section><h4 id="-index">Index&nbsp;<a href="#-index"><i class="fa fa-link"></i></a></h4><p>Retrieve a list of all datasets currently exported in either html or json. This will be provided in Q1.</p>
<section id="-index-get" class="panel panel-info"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Retrieve Index</span></div><div style="float:left"><a href="#-index-get" class="btn btn-xs btn-info">GET</a></div><div style="overflow:hidden"><code>/export/v1/index.{format}?domain={domain}</code></div></div><ul class="list-group"><li class="list-group-item"><strong>Request</strong><a data-toggle="collapse" data-target="#ae5226a659afbb2e720579697481722f" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="ae5226a659afbb2e720579697481722f" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/></code></pre></li><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#05ca15b23680dd2e81bc219472fd2548" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="05ca15b23680dd2e81bc219472fd2548" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/html</span><br/></code></pre><h5>Body</h5><pre><code>Returns <span class="hljs-operator">a</span> simple html response containing links <span class="hljs-built_in">to</span> <span class="hljs-keyword">each</span> exported dataset <span class="hljs-keyword">for</span> <span class="hljs-operator">a</span> particular domain along <span class="hljs-operator">with</span> <span class="hljs-operator">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">time</span> that export was updated.</code></pre></li><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#dd72072d943de8f57ddcc37fc61f8590" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="dd72072d943de8f57ddcc37fc61f8590" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/json</span><br/></code></pre><h5>Body</h5><pre><code><span class="hljs-preprocessor">[</span> 
    { <span class="hljs-number">4</span>x4: <span class="hljs-string">"1234-abcd"</span>, Content<span class="hljs-attribute">-Disposition</span>: <span class="hljs-string">"attachment; filename=amy-dataset.csv"</span>, Last<span class="hljs-attribute">-Modified</span>: <span class="hljs-string">"Thu, 12 Feb 2015 08:36:41 GMT"</span>, ttl: <span class="hljs-number">86400</span>},
    { <span class="hljs-number">4</span>x4: <span class="hljs-string">"abcd-1234"</span>, query: <span class="hljs-string">"where=foo=toast"</span>, Content<span class="hljs-attribute">-Disposition</span>: <span class="hljs-string">"attachment; filename=bar.csv"</span>, Last<span class="hljs-attribute">-Modified</span>: <span class="hljs-string">"Thu, 12 Feb 2015 08:36:41 GMT"</span>, ttl: <span class="hljs-number">86400</span>}
<span class="hljs-preprocessor">]</span><span class="hljs-markup">
</span></code></pre></li></ul></section><h4 id="-q2-only---integration-with-external-services-like-plotly">Q2 ONLY - Integration with external services like plotly&nbsp;<a href="#-q2-only---integration-with-external-services-like-plotly"><i class="fa fa-link"></i></a></h4><p>Third party integration (Plotly, cartodb etc.) endpoint</p>
<section id="-q2-only---integration-with-external-services-like-plotly-get" class="panel panel-info"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Retrive integration URL</span></div><div style="float:left"><a href="#-q2-only---integration-with-external-services-like-plotly-get" class="btn btn-xs btn-info">GET</a></div><div style="overflow:hidden"><code>/export/v1/integrations/{service name}/{4x4}</code></div></div><div class="panel-body"><p>Returns 200 with a url</p>
</div><ul class="list-group"><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#6bc1e5e1035af965ccdc4881ea339eb4" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="6bc1e5e1035af965ccdc4881ea339eb4" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/json</span><br/></code></pre><h5>Body</h5><pre><code>[
    { <span class="hljs-property">name</span>: <span class="hljs-property">name</span> <span class="hljs-keyword">of</span> service, url: URL <span class="hljs-keyword">to</span> integrate},
]
</code></pre></li></ul></section><h4 id="-q2-only---admin-configuration">Q2 ONLY - Admin Configuration&nbsp;<a href="#-q2-only---admin-configuration"><i class="fa fa-link"></i></a></h4><p>Configure the time to live for a domain, or specific resources in the export service. This will be provided in Q2.</p>
<section id="-q2-only---admin-configuration-post" class="panel panel-success"><div class="panel-heading"><div style="float:right"><span style="text-transform: lowercase">Set Export Time to Live</span></div><div style="float:left"><a href="#-q2-only---admin-configuration-post" class="btn btn-xs btn-success">POST</a></div><div style="overflow:hidden"><code>/export/v1/admin/{4x4}.json?domain={domain}&amp;retention={ttl}&amp;{reset}&amp;{auto}</code></div></div><ul class="list-group"><li class="list-group-item"><strong>Request</strong><a data-toggle="collapse" data-target="#931d2b5fb2f48d21047f26a3477dd847" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="931d2b5fb2f48d21047f26a3477dd847" class="list-group-item panel-collapse collapse"><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">basic-auth encoded value</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/><span class="hljs-attribute">undefined</span>: <span class="hljs-string">domain</span><br/></code></pre></li><li class="list-group-item"><strong>Response&nbsp;&nbsp;<code>200</code></strong><a data-toggle="collapse" data-target="#ddaf6e7386ebbd7a4811024cf74b3d6b" class="pull-right collapsed"><span class="closed">Show</span><span class="open">Hide</span></a></li><li id="ddaf6e7386ebbd7a4811024cf74b3d6b" class="list-group-item panel-collapse collapse"><div class="description"><p>Set the retention time for a specific resource or domain. If the domain is not specified it will set the default for all new datasets on that domain. Return the new retention time. Specifying reset will reset the ttl to the defaults for a given resource. Specifying auto (FUTURE, UNIMPLEMENTED) will configure asynchronous updates of an exported resource.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">undefined</span>: <span class="hljs-string">application/json</span><br/></code></pre><h5>Body</h5><pre><code>604800
</code></pre></li></ul></section></div></div></div></div><!-- block scripts--><!--     script--><!--         :coffee--><!--             $('table').addClass 'table'--><!--     if livePreview--><!--         script--><!--             :coffee--><!--                 socket = io()--><!--                 socket.on "refresh", (msg) ->--><!--                     $(document.body).html(msg)--></div></div>
